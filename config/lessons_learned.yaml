# Manually Configured Lessons
# These are high-confidence patterns that have been validated

table_mappings:
  # Example: Production tables require PROD_ prefix
  - id: "table-prefix-prod-001"
    content: "All production tables require 'PROD_' prefix"
    pattern: ".*"  # Applies to all tables
    prefix: "PROD_"
    transformation_rule: "Prepend 'PROD_' to all table names"
    confidence: 0.95
    applicable_to: ["all"]

  # Example: Specific table mapping
  # - id: "table-customers-001"
  #   content: "Customers table maps to PROD_Customers in BigQuery"
  #   schema_name: "Customers"
  #   actual_name: "PROD_Customers"
  #   prefix: "PROD_"
  #   confidence: 1.0
  #   applicable_to: ["Customers"]

column_mappings:
  # Example: customer_id mapping
  # - id: "col-customer-id-001"
  #   content: "In Customers table, customer_id column is named cust_id in database"
  #   table_name: "Customers"
  #   schema_column: "customer_id"
  #   actual_column: "cust_id"
  #   data_type: "INTEGER"
  #   confidence: 0.95

error_patterns:
  # Example: Table not found error
  - id: "error-table-not-found-001"
    content: "When table is not found, try adding PROD_ prefix"
    error_type: "table_not_found"
    error_pattern: "Table .* not found"
    suggested_fix: "Add 'PROD_' prefix to table name"
    confidence: 0.90
    examples:
      - query: "SELECT * FROM Customers"
        error: "Table `project.dataset.Customers` not found"
        fix: "SELECT * FROM PROD_Customers"
        result: "success"

query_patterns:
  # Example: Customer orders join pattern
  # - id: "pattern-customer-orders-001"
  #   content: "Standard pattern for joining customers with their orders"
  #   query_type: "customer_orders_join"
  #   sql_template: |
  #     SELECT
  #       c.customer_id,
  #       c.customer_name,
  #       COUNT(o.order_id) as order_count,
  #       SUM(o.total) as total_revenue
  #     FROM PROD_Customers c
  #     LEFT JOIN PROD_Orders o ON c.customer_id = o.customer_id
  #     GROUP BY c.customer_id, c.customer_name
  #   when_to_use: "When user asks for customer order statistics"
  #   required_tables: ["Customers", "Orders"]
  #   confidence: 0.85

# Notes:
# - This file contains manually validated patterns
# - Auto-learned patterns are stored in memory/learned_lessons.json
# - Confidence ranges from 0.0 to 1.0
# - Higher confidence patterns are applied first
# - Patterns can be disabled by commenting them out
